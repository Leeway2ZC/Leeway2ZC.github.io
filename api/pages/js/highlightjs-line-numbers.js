{"title":"","type":"page","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"(function(w,d){'use strict';var TABLE_NAME='hljs-ln',LINE_NAME='hljs-ln-line',CODE_BLOCK_NAME='hljs-ln-code',NUMBERS_BLOCK_NAME='hljs-ln-num...","date":"2025-08-11T07:05:40.715Z","updated":"2025-08-11T07:05:40.715Z","comments":true,"path":"api/pages/js/highlightjs-line-numbers.js","covers":null,"content":"(function(w,d){'use strict';var TABLE_NAME='hljs-ln',LINE_NAME='hljs-ln-line',CODE_BLOCK_NAME='hljs-ln-code',NUMBERS_BLOCK_NAME='hljs-ln-numbers',NUMBER_LINE_NAME='hljs-ln-n',DATA_ATTR_NAME='data-line-number',BREAK_LINE_REGEXP=/\\r\\n|\\r|\\n/g;if(w.hljs){w.hljs.initLineNumbersOnLoad=initLineNumbersOnLoad;w.hljs.lineNumbersBlock=lineNumbersBlock;w.hljs.lineNumbersValue=lineNumbersValue;addStyles();}else{w.console.error('highlight.js not detected!');}\nfunction isHljsLnCodeDescendant(domElt){var curElt=domElt;while(curElt){if(curElt.className&&curElt.className.indexOf('hljs-ln-code')!==-1){return true;}\ncurElt=curElt.parentNode;}\nreturn false;}\nfunction getHljsLnTable(hljsLnDomElt){var curElt=hljsLnDomElt;while(curElt.nodeName!=='TABLE'){curElt=curElt.parentNode;}\nreturn curElt;}\nfunction edgeGetSelectedCodeLines(selection){var selectionText=selection.toString();var tdAnchor=selection.anchorNode;while(tdAnchor.nodeName!=='TD'){tdAnchor=tdAnchor.parentNode;}\nvar tdFocus=selection.focusNode;while(tdFocus.nodeName!=='TD'){tdFocus=tdFocus.parentNode;}\nvar firstLineNumber=parseInt(tdAnchor.dataset.lineNumber);var lastLineNumber=parseInt(tdFocus.dataset.lineNumber);if(firstLineNumber!=lastLineNumber){var firstLineText=tdAnchor.textContent;var lastLineText=tdFocus.textContent;if(firstLineNumber>lastLineNumber){var tmp=firstLineNumber;firstLineNumber=lastLineNumber;lastLineNumber=tmp;tmp=firstLineText;firstLineText=lastLineText;lastLineText=tmp;}\nwhile(selectionText.indexOf(firstLineText)!==0){firstLineText=firstLineText.slice(1);}\nwhile(selectionText.lastIndexOf(lastLineText)===-1){lastLineText=lastLineText.slice(0,-1);}\nvar selectedText=firstLineText;var hljsLnTable=getHljsLnTable(tdAnchor);for(var i=firstLineNumber+1;i<lastLineNumber;++i){var codeLineSel=format('.{0}[{1}=\"{2}\"]',[CODE_BLOCK_NAME,DATA_ATTR_NAME,i]);var codeLineElt=hljsLnTable.querySelector(codeLineSel);selectedText+='\\n'+codeLineElt.textContent;}\nselectedText+='\\n'+lastLineText;return selectedText;}else{return selectionText;}}\ndocument.addEventListener('copy',function(e){var selection=window.getSelection();if(isHljsLnCodeDescendant(selection.anchorNode)){var selectionText;if(window.navigator.userAgent.indexOf('Edge')!==-1){selectionText=edgeGetSelectedCodeLines(selection);}else{selectionText=selection.toString();}\ne.clipboardData.setData('text/plain',selectionText);e.preventDefault();}});function addStyles(){var css=d.createElement('style');css.type='text/css';css.innerHTML=format('.{0}{border-collapse:collapse}'+\n'.{0} td{padding:0}'+\n'.{1}:before{content:attr({2})}',[TABLE_NAME,NUMBER_LINE_NAME,DATA_ATTR_NAME]);d.getElementsByTagName('head')[0].appendChild(css);}\nfunction initLineNumbersOnLoad(options){if(d.readyState==='interactive'||d.readyState==='complete'){documentReady(options);}else{w.addEventListener('DOMContentLoaded',function(){documentReady(options);});}}\nfunction documentReady(options){try{var blocks=d.querySelectorAll('code.hljs,code.nohighlight');for(var i in blocks){if(blocks.hasOwnProperty(i)){if(!isPluginDisabledForBlock(blocks[i])){lineNumbersBlock(blocks[i],options);}}}}catch(e){w.console.error('LineNumbers error: ',e);}}\nfunction isPluginDisabledForBlock(element){return element.classList.contains('nohljsln');}\nfunction lineNumbersBlock(element,options){if(typeof element!=='object')return;async(function(){element.innerHTML=lineNumbersInternal(element,options);});}\nfunction lineNumbersValue(value,options){if(typeof value!=='string')return;var element=document.createElement('code')\nelement.innerHTML=value\nreturn lineNumbersInternal(element,options);}\nfunction lineNumbersInternal(element,options){var internalOptions=mapOptions(element,options);duplicateMultilineNodes(element);return addLineNumbersBlockFor(element.innerHTML,internalOptions);}\nfunction addLineNumbersBlockFor(inputHtml,options){var lines=getLines(inputHtml);if(lines[lines.length-1].trim()===''){lines.pop();}\nif(lines.length>1||options.singleLine){var html='';for(var i=0,l=lines.length;i<l;i++){html+=format('<tr>'+\n'<td class=\"{0} {1}\" {3}=\"{5}\">'+\n'<div class=\"{2}\" {3}=\"{5}\"></div>'+\n'</td>'+\n'<td class=\"{0} {4}\" {3}=\"{5}\">'+\n'{6}'+\n'</td>'+\n'</tr>',[LINE_NAME,NUMBERS_BLOCK_NAME,NUMBER_LINE_NAME,DATA_ATTR_NAME,CODE_BLOCK_NAME,i+options.startFrom,lines[i].length>0?lines[i]:' ']);}\nreturn format('<table class=\"{0}\">{1}</table>',[TABLE_NAME,html]);}\nreturn inputHtml;}\nfunction mapOptions(element,options){options=options||{};return{singleLine:getSingleLineOption(options),startFrom:getStartFromOption(element,options)};}\nfunction getSingleLineOption(options){var defaultValue=false;if(!!options.singleLine){return options.singleLine;}\nreturn defaultValue;}\nfunction getStartFromOption(element,options){var defaultValue=1;var startFrom=defaultValue;if(isFinite(options.startFrom)){startFrom=options.startFrom;}\nvar value=getAttribute(element,'data-ln-start-from');if(value!==null){startFrom=toNumber(value,defaultValue);}\nreturn startFrom;}\nfunction duplicateMultilineNodes(element){var nodes=element.childNodes;for(var node in nodes){if(nodes.hasOwnProperty(node)){var child=nodes[node];if(getLinesCount(child.textContent)>0){if(child.childNodes.length>0){duplicateMultilineNodes(child);}else{duplicateMultilineNode(child.parentNode);}}}}}\nfunction duplicateMultilineNode(element){var className=element.className;if(!/hljs-/.test(className))return;var lines=getLines(element.innerHTML);for(var i=0,result='';i<lines.length;i++){var lineText=lines[i].length>0?lines[i]:' ';result+=format('<span class=\"{0}\">{1}</span>\\n',[className,lineText]);}\nelement.innerHTML=result.trim();}\nfunction getLines(text){if(text.length===0)return[];return text.split(BREAK_LINE_REGEXP);}\nfunction getLinesCount(text){return(text.trim().match(BREAK_LINE_REGEXP)||[]).length;}\nfunction async(func){w.setTimeout(func,0);}\nfunction format(format,args){return format.replace(/\\{(\\d+)\\}/g,function(m,n){return args[n]!==undefined?args[n]:m;});}\nfunction getAttribute(element,attrName){return element.hasAttribute(attrName)?element.getAttribute(attrName):null;}\nfunction toNumber(str,fallback){if(!str)return fallback;var number=Number(str);return isFinite(number)?number:fallback;}}(window,document));","count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"toc":"","data":[]}